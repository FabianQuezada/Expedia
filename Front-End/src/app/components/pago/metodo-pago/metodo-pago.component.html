<!-- MÉTODO DE PAGO -->
<section class="mb-5">
  <h3 class="mb-4"><i class="bi bi-credit-card me-2"></i>Pago</h3>

  <!-- OPCIONES -->
  <div class="d-flex flex-wrap gap-3 mb-4">
    <div class="p-3 border rounded text-center flex-fill"
      [ngClass]="{'border-primary': metodoSeleccionado === 'credito'}" style="cursor: pointer; min-width: 220px"
      (click)="seleccionarMetodo('credito')">
      <i class="bi bi-credit-card-fill fs-4 d-block mb-2"></i>
      Tarjeta de Crédito
    </div>
    <div class="p-3 border rounded text-center flex-fill"
      [ngClass]="{'border-primary': metodoSeleccionado === 'debito'}" style="cursor: pointer; min-width: 220px"
      (click)="seleccionarMetodo('debito')">
      <i class="bi bi-credit-card-fill fs-4 d-block mb-2"></i>
      Tarjeta de Débito
    </div>
    <div class="p-3 border rounded text-center flex-fill"
      [ngClass]="{'border-primary': metodoSeleccionado === 'paypal'}" style="cursor: pointer; min-width: 220px"
      (click)="seleccionarMetodo('paypal')">
      <i class="bi bi-paypal fs-4 d-block mb-2"></i>
      PayPal
    </div>
  </div>

  <!-- FORMULARIO TARJETA -->
  <div *ngIf="mostrarFormulario && (metodoSeleccionado === 'credito' || metodoSeleccionado === 'debito')"
    [formGroup]="pagoGroup" [@fadeIn]>
    <div class="mb-3">
      <label>Nombre en la tarjeta:</label>
      <input type="text" class="form-control" formControlName="nombreTarjeta" placeholder="Ej: Juan Pérez"
        [class.is-invalid]="campoInvalido('pago.nombreTarjeta')" />
      <div class="invalid-feedback">Solo letras. Campo obligatorio.</div>
    </div>
    <div class="mb-3">
      <label>Número de tarjeta:</label>
      <input type="text" class="form-control" formControlName="numeroTarjeta" placeholder="1234 5678 9012 3456"
        maxlength="16" inputmode="numeric" pattern="[0-9]*" (keydown)="soloNumeros($event)"
        [class.is-invalid]="campoInvalido('pago.numeroTarjeta')" />
      <div class="invalid-feedback">Debe tener 16 dígitos numéricos.</div>
    </div>
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Fecha de vencimiento (MM/AA):</label>
        <input type="text" class="form-control" formControlName="vencimiento" placeholder="08/26"
          inputmode="numeric" (keydown)="soloNumerosYSlash($event)" maxlength="5"
          [class.is-invalid]="campoInvalido('pago.vencimiento')" />
        <div class="invalid-feedback">Formato inválido. Usa MM/AA.</div>
      </div>
      <div class="col-md-6 mb-3">
        <label>Código de seguridad (CVV):</label>
        <input type="text" class="form-control" formControlName="cvv" placeholder="123" maxlength="3"
          inputmode="numeric" pattern="[0-9]*" (keydown)="soloNumeros($event)"
          [class.is-invalid]="campoInvalido('pago.cvv')" />
        <div class="invalid-feedback">Debe tener 3 dígitos.</div>
      </div>
    </div>
  </div>

  <!-- FORMULARIO PAYPAL -->
  <div *ngIf="mostrarFormulario && metodoSeleccionado === 'paypal'" [formGroup]="paypalGroup" [@fadeIn]>
    <div class="mb-3">
      <label>Correo electrónico de PayPal:</label>
      <input type="email" class="form-control" formControlName="correoPaypal" placeholder="usuario@paypal.com"
        [class.is-invalid]="campoInvalido('paypal.correoPaypal')" />
      <div class="invalid-feedback">Correo inválido.</div>
    </div>
    <div class="mb-3">
      <label>Contraseña de PayPal:</label>
      <input type="password" class="form-control" formControlName="contrasenaPaypal"
        [class.is-invalid]="campoInvalido('paypal.contrasenaPaypal')" />
      <div class="invalid-feedback">Campo obligatorio (mínimo 6 caracteres).</div>
    </div>
  </div>
</section>
